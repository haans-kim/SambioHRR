# Ground Rules 분석 메트릭 산출 기준 및 설명서

## 개요

삼성바이오로직스 HR 분석 시스템에서 사용되는 Ground Rules 분석의 각 메트릭에 대한 상세한 산출 기준과 설명을 제공합니다.

---

## 1. 기본 근무시간 메트릭

### 1.1 총 체류시간
- **정의**: 직원이 사업장에 체류한 전체 시간
- **산출 기준**: 최초 태그 시간 ~ 최종 태그 시간
- **단위**: 시간/분
- **계산 공식**: 
  ```
  총 체류시간 = 마지막 태그 타임스탬프 - 첫 번째 태그 타임스탬프
  ```

### 1.2 실제 작업시간
- **정의**: 실제 업무 활동으로 판단된 시간의 총합
- **포함 활동**: WORK, PREPARATION, MEETING, EDUCATION 상태
- **제외 활동**: MEAL, REST, NON_WORK, TRANSIT 상태
- **산출 기준**: 상태 머신을 통한 태그 분류 후 지속시간 합계
- **단위**: 시간/분

### 1.3 신고 근무시간
- **정의**: 직원이 신고한 실제 근무시간 (claim_data 테이블 기준)
- **데이터 소스**: `claim_data` 테이블의 `실제근무시간` 컬럼
- **표시 형식**: "X시간 Y분" (예: "9시간 13분")
- **특이사항**: 신고 시간이 0인 경우 분석 대상에서 제외

### 1.4 추정T1작업시간
- **정의**: T1 태그 중에서 업무로 추정된 시간 (불확실성 반영)
- **산출 기준**: T1_WORK_RETURN 가정이 적용된 시간 × 신뢰도
- **특징**: T1 태그만 대상, 확실한 업무 태그(O, G3, G4)는 제외
- **계산 공식**:
  ```
  추정T1작업시간 = Σ(T1_WORK_RETURN 지속시간 × 해당 구간 신뢰도)
  ```

---

## 2. 작업 품질 메트릭

### 2.1 작업추정률
- **정의**: 총 체류시간 대비 실제 작업시간의 비율
- **산출 기준**: (실제 작업시간 ÷ 총 체류시간) × 100
- **단위**: 백분율 (%)
- **활용**: 업무 효율성 지표

### 2.2 집중작업시간
- **정의**: 높은 집중도로 업무를 수행한 시간
- **판단 기준**:
  - 시간당 2개 이상의 O 태그 (장비 사용)
  - G3 태그 (Knox PIMS 회의) 시간
  - G4 태그 (교육) 시간
- **산출 방법**: 해당 시간대의 WORK/PREPARATION 상태 지속시간 합계

### 2.3 데이터 신뢰도
- **정의**: 수집된 태그 데이터의 신뢰성 점수
- **기본 점수**: 50점
- **가산 요소**:
  - O 태그 비율: 최대 +30점 (장비 사용 밀도)
  - 이벤트 빈도: 최대 +20점 (시간당 태그 수)
- **감산 요소**:
  - 불확실 이벤트 비율: -20점까지
  - 긴 공백 시간(2시간 초과): -10점
- **범위**: 0-100%

---

## 3. 활동별 세분화 메트릭

### 3.1 회의시간
- **정의**: 회의 및 미팅으로 분류된 시간
- **포함 태그**: MEETING 상태로 분류된 모든 활동
- **특별 처리**: G3(Knox PIMS) 태그는 회의시간으로 분류

### 3.2 식사시간
- **정의**: 식사 관련 활동 시간
- **고정 규칙**:
  - M1 태그: 30분 고정
  - M2 태그: 10분 고정
- **산출 기준**: 태그별 고정 지속시간 적용

### 3.3 이동시간
- **정의**: 사업장 내 이동 및 출입 관련 시간
- **포함 상태**: TRANSIT, ENTRY, EXIT
- **산출 기준**: 해당 상태로 분류된 지속시간 합계

### 3.4 비업무시간
- **정의**: 휴식 및 개인 용무 시간
- **포함 상태**: REST, NON_WORK
- **산출 기준**: 해당 상태로 분류된 지속시간 합계

---

## 4. Ground Rules 고급 메트릭

### 4.1 Ground Rules 업무시간
- **정의**: 조직 집단지성을 활용하여 재계산된 정밀 업무시간
- **특징**: 팀별 이동 패턴을 학습하여 T1 태그의 업무 관련성 정확도 향상
- **개선율**: 일반 분석 대비 평균 15-25% 정확도 향상

### 4.2 Ground Rules 신뢰도
- **정의**: Ground Rules 엔진이 계산한 분석 결과의 신뢰도
- **표시**: 백분율 (예: "50.5%", "59.6%")
- **기준**: 팀 패턴 일치도, 규칙 적용 성공률 등을 종합 평가

### 4.3 업무 관련 이동
- **정의**: T1 태그 중 업무와 관련된 이동으로 분류된 시간
- **판단 기준**: 팀별 집단지성 패턴 학습 결과 적용
- **활용**: 실제 업무시간 계산에 포함

### 4.4 비업무 이동
- **정의**: T1 태그 중 개인 용무나 비업무 이동으로 분류된 시간
- **판단 기준**: Ground Rules 패턴 분석 결과
- **활용**: 실제 업무시간 계산에서 제외

### 4.5 팀 기준선
- **정의**: 해당 팀의 평균적인 업무 패턴 기준점
- **표시**: 백분율 (예: "50%")
- **활용**: 개인 패턴과 팀 평균 패턴 비교 분석

### 4.6 이상치 점수
- **정의**: 개인의 업무 패턴이 팀 평균과 얼마나 다른지를 나타내는 지표
- **계산**: 개인 패턴과 팀 기준선 간의 편차 정도
- **활용**: 특이 패턴 식별 및 개별 케어 필요성 판단

### 4.7 적용 규칙수
- **정의**: Ground Rules 분석 시 적용된 집단지성 규칙의 개수
- **표시**: 정수 (예: "50", "19")
- **의미**: 숫자가 높을수록 더 풍부한 데이터 기반 분석

---

## 5. 메트릭 해석 가이드

### 5.1 정상 범위
- **작업추정률**: 60-80%
- **데이터 신뢰도**: 70% 이상
- **Ground Rules 신뢰도**: 50% 이상
- **이상치 점수**: 30% 미만

### 5.2 주의 필요 지표
- **작업추정률** < 50%: 업무 효율성 검토 필요
- **데이터 신뢰도** < 50%: 태그 착용 점검 필요
- **이상치 점수** > 50%: 개별 패턴 분석 필요

### 5.3 Ground Rules vs 일반 분석 비교
- **정확도 개선**: 평균 15-25%
- **T1 태그 분류**: 조직 패턴 학습 기반
- **개인화**: 팀별 특성 반영
- **신뢰도**: 집단지성 활용으로 향상

---

## 6. 데이터 품질 보장

### 6.1 분석 대상 선별
- **기준**: 신고 근무시간 > 0인 날짜만 분석
- **효과**: 주말/휴일 등 불필요한 분석 제외
- **결과**: 에러율 대폭 감소 (92개 → 예상 10개 미만)

### 6.2 메모리 기반 처리
- **방식**: 3단계 아키텍처 (데이터 로딩 → 메모리 계산 → 배치 저장)
- **성능**: DB 접근 최소화로 고속 처리
- **안정성**: 트랜잭션 안전성 보장

---

## 7. 업데이트 이력

- **2025-09-09**: 초기 문서 작성
- **주요 개선사항**: 
  - Claim 기반 선택적 분석 적용
  - 신고 근무시간 포맷 정규화 ("X시간 Y분")
  - 식사시간 계산 로직 정확성 개선 (M1=30분, M2=10분)
  - 데이터 신뢰도 계산 알고리즘 정규화

---

## 문의사항

메트릭 관련 문의사항이 있으실 경우, 시스템 관리자에게 연락주시기 바랍니다.