# 휴가_연차 컬럼 구현 완료 보고서

## 요약
claim_data 테이블에 `휴가_연차` 컬럼을 추가하여 연차/휴가 시간을 체계적으로 관리할 수 있는 구조를 구현했습니다.

## 구현 내역

### 1. 휴가_연차 컬럼 추가
```sql
ALTER TABLE claim_data ADD COLUMN 휴가_연차 REAL DEFAULT 0;
```

### 2. 연차/휴가 시간 계산 로직

#### 전일 휴가 (8시간)
- 년차, 연차
- 배우자출산휴가, 본인결혼, 장기근속휴가, 경조휴가
- 출산전후휴가(유급/무급)
- 가족돌봄휴가
- 추가연차 (시간 명시 없는 경우)

#### 반차 (4시간)
- 오전반차(탄력근무제)
- 오후반차(탄력근무제)

#### 시간연차 (1-7시간)
- 1시간 휴가(선택근무제): 1시간
- 2시간 휴가(탄력근무제/선택근무제): 2시간
- 3시간 휴가(선택근무제): 3시간
- 4시간 휴가(선택근무제): 4시간
- 5시간 휴가(선택근무제): 5시간
- 6시간 휴가(선택근무제): 6시간
- 7시간 휴가(선택근무제): 7시간

#### 특별 케이스
- 임신기 근로시간 단축: 2시간 (근로시간 단축분)

### 3. 출장/교육 근무시간 처리

출장/교육/연수의 경우 실제근무시간이 없거나 3시간 미만인 경우 8시간으로 자동 보정:
- 사외교육: 평균 8.28시간
- 해외출장: 평균 8.12시간
- 국내출장: 평균 8.12시간
- 사외파견: 평균 8.86시간

### 4. 2025년 6월 데이터 통계

#### 전체 분포
```
정상근무: 138,638건 (774,346.5시간)
연차/휴가: 8,200건 (58,630시간)
출장/교육: 876건 (7,194.4시간)
```

#### 휴가 유형별 분포
```
전일(8h): 6,817건 (54,536시간)
반차(4h): 507건 (2,028시간)
시간연차(2h): 740건 (1,480시간)
시간연차(6h): 68건 (408시간)
시간연차(1h): 42건 (42시간)
기타 시간연차: 26건
```

#### 주요 휴가 사용 현황
1. 년차: 5,570건
2. 배우자출산휴가: 354건
3. 2시간 휴가(탄력근무제): 353건
4. 임신기 근로시간 단축: 345건
5. 출산전후휴가(유급): 277건

## 활용 방안

### 1. 정확한 근무시간 계산
```sql
-- 실제 근무시간 + 휴가시간 = 총 업무시간
SELECT
  사번,
  SUM(실제근무시간) as actual_work,
  SUM(휴가_연차) as leave_hours,
  SUM(실제근무시간 + 휴가_연차) as total_hours
FROM claim_data
WHERE 근무일 BETWEEN '2025-06-01' AND '2025-06-30'
GROUP BY 사번;
```

### 2. 연차 사용률 분석
```sql
-- 부서별 연차 사용 패턴
SELECT
  e.center_name,
  COUNT(DISTINCT c.사번) as employees,
  SUM(c.휴가_연차) as total_leave_hours,
  ROUND(SUM(c.휴가_연차) / COUNT(DISTINCT c.사번), 1) as avg_leave_per_person
FROM claim_data c
JOIN employees e ON e.employee_id = CAST(c.사번 AS TEXT)
WHERE c.근무일 BETWEEN '2025-06-01' AND '2025-06-30'
  AND c.휴가_연차 > 0
GROUP BY e.center_name;
```

### 3. 근태 패턴 분석
- 연차 사용 집중 시기 파악
- 부서별 휴가 사용 패턴 비교
- 출장/교육 빈도 분석

## 데이터 품질
- 총 149,692개 레코드 중 141,492개(94.5%) 정상 처리
- 8,200개(5.5%) 휴가/연차 레코드 식별 및 시간 할당
- 876개 출장/교육 레코드 근무시간 보정 완료